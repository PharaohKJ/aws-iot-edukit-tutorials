<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Core2 for AWS IoT EduKit BSP: FT6336U</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="AWS_logo_RGB.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Core2 for AWS IoT EduKit BSP
   &#160;<span id="projectnumber">1.2.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">FT6336U </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The FT6336U library provides convenience functions to interact with the capacitive touch panel. The initialization function configures the Espressif I2C driver and the FT6336U capacitive touch controller with preset parameters. It creates a FreeRTOS task and installs an ISR on the interrupt pin FT6336U_INTR_PIN.</p>
<p><a class="anchor" id="touch"></a></p>
<p><a href="./block_diagram-ft6336u.png"><img src="./block_diagram-ft6336u.png" alt="Circuit Block Diagram for the FT6336U capacitive touch sensor" class="center" class="inline"/></a></p>
<p>To enable this feature using KConfig, use the command <code>pio run --environment core2foraws --target menuconfig</code> from within the root of the project directory in your <a href="/en/blinky-hello-world/prerequisites.html#open-the-platformio-cli-terminal-window">PlatformIO terminal window</a> and go to the menu <code>Component Config --&gt; Core2 for AWS hardware enable</code> to set the features you want to enable.</p>
<h1><a class="anchor" id="ft6336u_example"></a>
Example</h1>
<p>The following example initializes the Core2 for AWS (which in-turn initializes PMU for the battery and SPI bus), initialize the FT6336U and then creates a FreeRTOS task of priority 1 that prints "PRESSED!" using the ESP logger if the screen is pressed anywhere.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;freertos/FreeRTOS.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;freertos/task.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;esp_log.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="core2for_a_w_s_8h.html">core2foraws.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ft6336u_8h.html">ft6336u.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *TAG = <span class="stringliteral">&quot;EXAMPLE&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> touch_task(<span class="keywordtype">void</span>* pvParameters){</div>
<div class="line">    <span class="keywordflow">for</span>(;;){</div>
<div class="line">        <span class="keywordflow">if</span>(<a class="code" href="ft6336u_8h.html#a35a78ae3c2b1e6a1997d98d685612472">FT6336U_WasPressed</a>() == 1){</div>
<div class="line">            ESP_LOGI(TAG, <span class="stringliteral">&quot;PRESSED!&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        vTaskDelay(pdMS_TO_TICKS(100));</div>
<div class="line">    }</div>
<div class="line">    vTaskDelete(NULL); <span class="comment">/* Should never get to here... */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> app_main(<span class="keywordtype">void</span>){</div>
<div class="line">    <a class="code" href="core2for_a_w_s_8h.html#a97289b2e8e9d22bcabba9ea38761c3f3">Core2ForAWS_Init</a>();</div>
<div class="line">    <a class="code" href="ft6336u_8h.html#a3b3df9f6043c40e3245f40e6f54c1a50">FT6336U_Init</a>();</div>
<div class="line"> </div>
<div class="line">    xTaskCreatePinnedToCore(touch_task, <span class="stringliteral">&quot;touchTask&quot;</span>, configMINIMAL_STACK_SIZE * 3, NULL, 1, NULL, 1);</div>
<div class="line">}</div>
<div class="ttc" id="acore2for_a_w_s_8h_html"><div class="ttname"><a href="core2for_a_w_s_8h.html">core2forAWS.h</a></div><div class="ttdoc">Functions to initialize and access Core2 for AWS IoT EduKit hardware features.</div></div>
<div class="ttc" id="acore2for_a_w_s_8h_html_a97289b2e8e9d22bcabba9ea38761c3f3"><div class="ttname"><a href="core2for_a_w_s_8h.html#a97289b2e8e9d22bcabba9ea38761c3f3">Core2ForAWS_Init</a></div><div class="ttdeci">void Core2ForAWS_Init()</div><div class="ttdoc">Initializes the power chip for battery charging and the SPI bus used for the screen and the SD card.</div><div class="ttdef"><b>Definition:</b> core2forAWS.c:19</div></div>
<div class="ttc" id="aft6336u_8h_html"><div class="ttname"><a href="ft6336u_8h.html">ft6336u.h</a></div><div class="ttdoc">Functions for the FT6336U capacitive touch panel controller.</div></div>
<div class="ttc" id="aft6336u_8h_html_a35a78ae3c2b1e6a1997d98d685612472"><div class="ttname"><a href="ft6336u_8h.html#a35a78ae3c2b1e6a1997d98d685612472">FT6336U_WasPressed</a></div><div class="ttdeci">bool FT6336U_WasPressed()</div><div class="ttdoc">Retrieves the pressed state of the touch screen.</div><div class="ttdef"><b>Definition:</b> ft6336u.c:74</div></div>
<div class="ttc" id="aft6336u_8h_html_a3b3df9f6043c40e3245f40e6f54c1a50"><div class="ttname"><a href="ft6336u_8h.html#a3b3df9f6043c40e3245f40e6f54c1a50">FT6336U_Init</a></div><div class="ttdeci">void FT6336U_Init()</div><div class="ttdoc">Initializes the FT6336U over I2C.</div><div class="ttdef"><b>Definition:</b> ft6336u.c:23</div></div>
</div><!-- fragment --><h1><a class="anchor" id="ft6336u_functions"></a>
Functions</h1>
<ul>
<li><a class="el" href="ft6336_init_function.html">FT6336U_Init</a> <br  />
</li>
<li><a class="el" href="ft6336_gettouch_function.html">FT6336U_GetTouch</a> <br  />
</li>
<li><a class="el" href="ft6336_waspressed_function.html">FT6336U_WasPressed</a> <br  />
</li>
<li><a class="el" href="ft6336_getpressposx_function.html">FT6336U_GetPressPosX</a> <br  />
</li>
<li><a class="el" href="ft6336_getpressposy_function.html">FT6336U_GetPressPosY</a> <br  />
 </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
